<!DOCTYPE html>
<title>Egalité professionnelle - Ministère du Travail</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width">
<link rel="icon" href="data:;base64,iVBORw0KGgo=">

<header>
  <img src="https://solen1.enquetes.social.gouv.fr/cgi-2/HE/Image?P=1162z26z19z2A57D053F4" alt="Marianne">
  <hgroup>
    <h1>Égalité professionnelle</h1>
    <h2>Index 2020 au titre de l'année 2019</h2>
  </hgroup>
</header>
<main></main>

<nav>
  <a class=button href="/" previous>Précédent</a>
  <progress max=0 value=0></progress>
  <a class=button href="/" next>Suivant</a>
</nav>

<template name=intro>
  <h1>A propos de la transmission des indicateurs et du niveau de résultat</h1>

  <p>Les informations recueillies sur ce formulaire répondent à l’obligation de transmission aux services du ministre chargé du travail des indicateurs et du niveau de résultat en matière d’écart de rémunération entre les femmes et les hommes prévue à l’article D.1142-5 du code du travail au 1er mars 2020.</p>

  <p class=warning>Attention, si vous avez déjà fait votre déclaration sur le site Index Egapro, vous ne devez pas faire une nouvelle déclaration ici.</p>
</template>


<template name=declarant>
  <h1>Identification du déclarant pour tout contact ultérieur</h1>

  <form>
    <fieldset>
      <!-- fieldset display flex can't work in Chromium -->
      <div class=row>
        <div>
          <label for=field-nom>Nom</label>
          <input id=field-nom name=nom>
        </div>
        <div>
          <label for=field-prenom>Prénom</label>
          <input id=field-prenom name=prenom>
        </div>
      </div>
    </fieldset>

    <fieldset>
      <div>
        <label for=field-tel>Téléphone professionel (10 chiffres)</label>
        <input id=field-tel name=tel>
      </div>
    </fieldset>

    <fieldset>
      <p>Adresse de l'entreprise déclarante ou siège de l'UES</p>
      <div class=row>
        <div>
          <select name=region>
            <option value="">Région</option>
          </select>
        </div>
        <div>
          <select name=departement>
            <option value="">Département</option>
          </select>
        </div>
      </div>

      <div class=row>
        <div>
          <label for="field-adresse">Adresse</label>
          <input id=field-adresse name=adresse>
        </div>
      </div>

      <div class=row>
        <div>
          <label for="field-codepostal">Code postal (5 car.)</label>
          <input id=field-codepostal name=codepostal>
        </div>
        <div>
          <label for="field-commune">Commune</label>
          <input id=field-commune name=commune>
        </div>
      </div>
    </fieldset>
  </form>
</template>

<template name=annee>
  <h1>Année et périmètre retenus pour le calcul
    et la publication des indicateurs</h1>

  <fieldset>
    <div class=row>
      <label for=field-annee>Année au titre de laquelle vous transmettez vos indicateurs</label>
      <input name=annee value=2019 disabled>
    </div>
  </fieldset>

  <fieldset>
    <div class=row>
      <h4>Vous êtes une</h4>
      <label><input type=radio name=statut value="entreprise"> Entreprise</label>
      <label><input type=radio name=statut value="ues"> Unité Économique et Sociale (UES)</label>
    </div>
  </fieldset>

  <fieldset>
    <div class=row>
      <h4>Tranches d'effectifs</h4>
      <label><input type=radio name=effectifs value="50"> De 50 à 100 inclus</label>
      <label><input type=radio name=effectifs value="250"> De 251 à 999 inclus</label>
      <label><input type=radio name=effectifs value="1000"> 1000 ou plus</label>
    </div>
  </fieldset>

  <h1>Période de référence considérée pour le calcul des indicateurs</h1>

  <fieldset>
    <div class=row>
      <h4>Période de référence</h4>
      <label><input type=radio name=periode value="civile"> Année civile</label>
      <label><input type=radio name=periode value="autre"> Autre période de référence</label>
    </div>
  </fieldset>

  <fieldset>
    <div class="row">
      <label for="field-reference-date">Date de début de la période de référence</label>
    </div>
  </fieldset>

  <fieldset>
    <div class=row>
      <label for="field-date">Date de début de la période de référence</label>
      <input id="field-date" type=date name=date>
    </div>
  </fieldset>

  <fieldset>
    <div class=row>
      <label for="field-salaries">Nombre de salariés pris en compte pour le calcul des indicateurs sur la période de référence</label>
      <input id="field-salaries" type=number name=salaries min=0>
    </div>
  </fieldset>
</template>

<template name=404>
  <h1>La page n'existe pas</h1>
  <p>Vous êtes arrivé sur cette page par erreur. <a href="/">Retourner à l'accueil</a></p>
</template>


<script src="https://unpkg.com/page/page.js"></script>
<script>
  const main = document.querySelector('main')
  const progress = document.querySelector('progress')
  const previousButton = document.querySelector('a[previous]')
  const nextButton = document.querySelector('a[next]')
  const template404 = document.querySelector('template[name="404"]')

  const steps = [
    '', 'declarant', 'annee'
  ]

  progress.max = steps.length - 1

  page('/', function (req) {
    changePage('')
  })

  page('/:name', function (req) {
    changePage(req.params.name)
  })

  page({ hashbang: true })


  function changePage(name) {
    loadTemplate(name || 'intro')

    const step = steps.indexOf(name)
    progress.value = step
    previousButton.onclick = function() {page.redirect(`/${steps[step - 1]}`)}
    nextButton.onclick = function() {page.redirect(`/${steps[step + 1]}`)}
    step <= 0 ? previousButton.setAttribute('disabled', 'disabled') : previousButton.removeAttribute('disabled')
  }

  function loadTemplate(name) {
    const template = document.querySelector(`[name=${name}]`)
    try {
      main.innerHTML = template.innerHTML
    }
    catch {
      main.innerHTML = template404.innerHTML
    }
  }
</script>

<style>
  html {
    background-color: #fff;
    box-sizing: border-box;
    padding: 0;
    margin: 0;
  }
  body {
    font-family: Arial, Helvetica, sans-serif;
    max-width: 740px;
    padding: 2rem;
    margin-top: 1rem;
    border-radius: .3rem;
    background-color: #EDEDED;
    font-size: 15px;
  }

  template {
    display: none;
  }

  header {
    text-align: center;
  }
  header hgroup {
    padding: .5rem 3rem;
  }

  hgroup h1,
  hgroup h2 {
    padding: .2rem 0;
    margin: 0;
  }
  hgroup,
  main h1 {
    background-color: #FF0080;
    color: white;
  }

  main h1 {
    font-size: 1.3rem;
    padding: 1rem;
    text-align: center;
  }
  h3, h4 {
    margin: 0;
  }

  nav {
    margin-top: 3rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  progress {
    flex: 1;
  }

  fieldset {
    display: block;
    border: 1px solid #FF0080;
    padding: .5rem;
  }
  fieldset:not(:last-of-type) {
    margin-bottom: 1rem;
  }

  label {
    margin-right: 2rem;
  }

  .warning {
    color: #c00;
  }

  a.button {
    text-decoration: none;
    color: #fff;
    background-color: #FF0080;
    font-weight: bold;
    font-size: 1.3rem;
    box-shadow: 0 5px 5px #999;
    padding: .5rem 3rem;
    border-radius: .5rem;
  }
  a.button[disabled] {
    background-color: #bbb;
    box-shadow: none;
  }

  .row {
    display: flex;
    flex-direction: row;
    align-items: center;
  }
  .row > * {
    flex: 1;
  }
  .row:not(:last-child) {
    margin-bottom: 1rem;
  }

  label {
    max-width: 50%;
  }

  input:not([type=radio]),
  select {
    width: 50%;
  }

  @media screen and (min-width: 600px) {
    body {
      margin: 1rem auto;
    }

    header {
      display: flex;
    }

    header hgroup {
      flex: auto;
      margin-left: 1rem;
    }
  }
</style>

<!DOCTYPE html>
<html lang="fr">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<title>Ecart de rémunération entre les femmes et les hommes - Egalité professionnelle - Ministère du Travail</title>
<link rel="stylesheet" href="/declaration/assets/css/solen.css">
<script src="/declaration/assets/js/utils.js"></script>

<header>
  <div>
    <img src="/declaration/assets/img/marianne.png" alt="Marianne">
    <hgroup>
      <h1>Égalité professionnelle</h1>
    </hgroup>
  </div>
</header>

<form class=main id="page-form" action="/remuneration.html">
  <section id="declaration-readonly" class="declaration-mode" hidden>
  <p>
    Cette déclaration a été validée et transmise.
  </p>
  <p>
    Vous pouvez la modifier et elle remplacera la déclaration actuelle une fois à nouveau validée et transmise à la dernière étape.
  </p>
  <button type="button" onclick="setDraftStatus()">Modifier la déclaration</button>
</section>
<section id="declaration-draft" class="declaration-mode" hidden>
  <p>
    Vous êtes en train de modifier une déclaration validée et transmise.<br>
    Vos modifications ne seront enregistrées que lorsque vous l'aurez à nouveau validée et transmise à la dernière étape.
  </p>
</section>

<main>
  <h1>Ecart de rémunération entre les femmes et les hommes</h1>

<fieldset>
  <div class=row>
    <div>
      
<label for="field--_indicateurs.rémunérations.calculable">L’indicateur sur l’écart de rémunération est-il calculable ?</label>


<div
  id="field--_indicateurs.rémunérations.calculable"
  name="_indicateurs.rémunérations.calculable"
  type="radiogroup"
  >
  
     
    
      
      
      <label>
        <input
          required
          type="radio"
          onchange="toggleFields(event)"
          name="_indicateurs.rémunérations.calculable" value="oui"> oui
      </label>
      
    
      
      
      <label>
        <input
          required
          type="radio"
          onchange="toggleFields(event)"
          name="_indicateurs.rémunérations.calculable" value="non"> non
      </label>
      
    
  
</div>

    </div>
  </div>
</fieldset>

<fieldset id="fieldset-mode">
  <div class=row>
    <div>
      
<label for="field--indicateurs.rémunérations.mode">Modalité de calcul de l'indicateur sur l'écart de rémunération</label>


<div
  id="field--indicateurs.rémunérations.mode"
  name="indicateurs.rémunérations.mode"
  type="radiogroup"
  >
  
     
    
      
      <div>
      <label>
        <input
          required
          type="radio"
          onchange="toggleFields(event)"
          name="indicateurs.rémunérations.mode" value="niveau_branche"> Par niveau ou coefficient hiérarchique en application de la classification de branche
      </label>
      </div>
    
      
      <div>
      <label>
        <input
          required
          type="radio"
          onchange="toggleFields(event)"
          name="indicateurs.rémunérations.mode" value="niveau_autre"> Par niveau ou coefficient hiérarchique en application d'une autre méthode de cotation des postes
      </label>
      </div>
    
      
      <div>
      <label>
        <input
          required
          type="radio"
          onchange="toggleFields(event)"
          name="indicateurs.rémunérations.mode" value="csp"> Par catégorie socio-professionnelle
      </label>
      </div>
    
  
</div>

    </div>
  </div>
</fieldset>

<fieldset id="fieldset-cse">
  <div class=row>
    
  
<label for="field--indicateurs.rémunérations.date_consultation_cse">Date de consultation du CSE*</label>



<input
  id="field--indicateurs.rémunérations.date_consultation_cse"
  value=""
  type="date"
  name="indicateurs.rémunérations.date_consultation_cse"
  placeholder=""
  
  
  
  
  required
  
  
  
  
  
  
  
/>

  </div>
</fieldset>

<fieldset id="fieldset-calculable-csp">
  <div class=row>
    <div>
      
<label for="field--_indicateurs.rémunérations.calculable_csp">Vous déclarez que votre indicateur n’est pas calculable, avez-vous procédé au calcul de cet indicateur par catégorie socio-professionnelle ?</label>


<div
  id="field--_indicateurs.rémunérations.calculable_csp"
  name="_indicateurs.rémunérations.calculable_csp"
  type="radiogroup"
  >
  
     
    
      
      
      <label>
        <input
          required
          type="radio"
          onchange="checkCalculableCSP(event)"
          name="_indicateurs.rémunérations.calculable_csp" value="oui"> oui
      </label>
      
    
      
      
      <label>
        <input
          required
          type="radio"
          onchange="checkCalculableCSP(event)"
          name="_indicateurs.rémunérations.calculable_csp" value="non"> non
      </label>
      
    
  
</div>

    </div>
  </div>
</fieldset>

<fieldset id="fieldset-motif">
  <div class=row>
    
<label for="field--indicateurs.rémunérations.non_calculable">Précision du motif de non calculabilité de l'indicateur*</label>


<select
  id="field--indicateurs.rémunérations.non_calculable"
  name="indicateurs.rémunérations.non_calculable"
  required
  empty
  
  
>
  
     
    <option value=""> ––– </option>
    
      
      <option value="egvi40pcet">Effectif des groupes valides inférieur à 40% de l'effectif total</option>
    
  
</select>

  </div>
</fieldset>

<script>
  const calculableField = selectField('_indicateurs.rémunérations.calculable')
  const calculableCspField = selectField('_indicateurs.rémunérations.calculable_csp')
  const modeField = selectField('indicateurs.rémunérations.mode')

  document.onready = () => {
    if (app.getItem('indicateurs.rémunérations')) {
      // We did already submit this current form, so we can infer the
      // "_indicateurs.rémunérations.calculable" data.
      if (!app.data._indicateurs) app.data._indicateurs = {}
      if (!app.data._indicateurs.rémunérations) app.data._indicateurs.rémunérations = {}
      const calculable = app.data.indicateurs.rémunérations.non_calculable ? "non" : "oui"
      app.data._indicateurs.rémunérations.calculable = calculable
      if (app.data.indicateurs.rémunérations.non_calculable) app.data._indicateurs.rémunérations.calculable_csp = "oui"
    }
  }

  function toggleFields(event) {
    const isCalculableChosen = calculableField.querySelector(':checked')
    const isCalculable = isCalculableChosen && calculableField.querySelector(':checked').value === 'oui'
    const isCalculatedCsp = calculableCspField.querySelector(':checked') && calculableCspField.querySelector(':checked').value === 'oui'
    const mode = modeField.querySelector(':checked') && modeField.querySelector(':checked').value
    enableField('#fieldset-mode', isCalculable)
    enableField('#fieldset-cse', isCalculable && ['niveau_branche', 'niveau_autre'].includes(mode))
    enableField('#fieldset-calculable-csp', isCalculableChosen && !isCalculable)
    enableField('#fieldset-motif', isCalculableChosen && !isCalculable && isCalculatedCsp)

    if (app.getItem("indicateurs.rémunérations.catégories") &&
        event &&
        ["_indicateurs.rémunérations.calculable", "indicateurs.rémunérations.mode"].includes(event.target.name)
        ) {
      // Make sure the following "remuneration-csp" or "remuneration-coef" form has no values
      // for a previously filled "mode".
      delete app.data.indicateurs.rémunérations.catégories
    }
  }

  function checkCalculableCSP(event) {
    const target = event.target
    if (target.value === "non") {
      target.checked = false
      alert("Avant de déclarer votre indicateur incalculable, vous devez procéder au calcul de cet indicateur par CSP. Si l’indicateur est non calculable avec cette méthode, alors vous pouvez déclarer que votre indicateur est non calculable et poursuivre votre déclaration pour les autres indicateurs.")
    }
    toggleFields()
  }

  document.onloaded = () => {
    toggleFields()
  }

  document.onsend = data => {
    if (app.getItem('indicateurs.rémunérations')) {
      if (data.indicateurs.rémunérations.non_calculable) {
        delete data.indicateurs.rémunérations.catégories
        delete data.indicateurs.rémunérations.résultat
        delete data.indicateurs.rémunérations.population_favorable
        delete data.indicateurs.rémunérations.note
      }
    }
  }
</script>

</main>

<nav>
  
  <a class=button rel=prev>Précédent</a>
  
  <progress max=0 value=0></progress>
  
  <button rel=next>Suivant</button>
  
</nav>

<!-- tunnel.js uses DOM and should be loaded last -->
<script src="/declaration/assets/js/tunnel.js"></script>

</form>

</html>

<!DOCTYPE html>
<html lang="fr">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<title>Publication du niveau de résultat global - Egalité professionnelle - Ministère du Travail</title>
<link rel="stylesheet" href="/declaration/assets/css/solen.css">
<script src="/declaration/assets/js/utils.js"></script>

<header>
  <div>
    <img src="/declaration/assets/img/marianne.png" alt="Marianne">
    <hgroup>
      <h1>Égalité professionnelle</h1>
    </hgroup>
  </div>
</header>

<form class=main id="page-form" action="/resultat.html">
  <section id="declaration-readonly" class="declaration-mode" hidden>
  <p>
    Cette déclaration a été validée et transmise.
  </p>
  <p>
    Vous pouvez la modifier et elle remplacera la déclaration actuelle une fois à nouveau validée et transmise à la dernière étape.
  </p>
  <button type="button" onclick="setDraftStatus()">Modifier la déclaration</button>
</section>
<section id="declaration-draft" class="declaration-mode" hidden>
  <p>
    Vous êtes en train de modifier une déclaration validée et transmise.<br>
    Vos modifications ne seront enregistrées que lorsque vous l'aurez à nouveau validée et transmise à la dernière étape.
  </p>
</section>

<main>
  <h1>Publication du niveau de résultat global</h1>

<p>Le niveau de résultat est publié annuellement, au plus tard le 1er mars de
l’année en cours, au titre de l’année précédente, sur le site Internet de
l’entreprise lorsqu’il en existe un. À défaut, il est porté à la connaissance
des salariés par tout moyen.</p>

<fieldset>
  <div class=row>
    
  
<label for="field--déclaration.publication.date">Date de publication du niveau de résultat obtenu*</label>



<input
  id="field--déclaration.publication.date"
  value=""
  type="date"
  name="déclaration.publication.date"
  placeholder=""
  
  
  
  
  
  required
  
  
  
  
  
  
/>

  </div>
</fieldset>

<fieldset>
  <div class=row>
    <div>
      
<label for="field--_déclaration.publication.site_internet">Avez-vous un site Internet pour publier le niveau de résultat obtenu ?</label>


<div
  id="field--_déclaration.publication.site_internet"
  name="_déclaration.publication.site_internet"
  type="radiogroup"
  >
  
     
    
      
      
      <label>
        <input
          required
          type="radio"
          onchange="toggleFields()"
          name="_déclaration.publication.site_internet" value="oui"> oui
      </label>
      
    
      
      
      <label>
        <input
          required
          type="radio"
          onchange="toggleFields()"
          name="_déclaration.publication.site_internet" value="non"> non
      </label>
      
    
  
</div>

    </div>
  </div>
</fieldset>

<fieldset id="fieldset-url">
  <div class=row>
  
<label for="field--déclaration.publication.url">Adresse du site Internet de publication du niveau de résultat obtenu*</label>



<input
  id="field--déclaration.publication.url"
  value=""
  type=""
  name="déclaration.publication.url"
  placeholder=""
  
  
  
  
  
  required
  
  
  
  
  
  
/>
</div>
</fieldset>

<fieldset id="fieldset-modalites">
  <div class=row>
<label for="field--déclaration.publication.modalités">Préciser les modalités de communication du niveau de résultat obtenu auprès de vos salariés</label>


<textarea
  id="field--déclaration.publication.modalités"
  name="déclaration.publication.modalités"
  placeholder=""
  true
></textarea>
</div>
</fieldset>

<script>
  const siteInternetField = selectField('_déclaration.publication.site_internet')

  document.onready = () => {
    if (app.data?.déclaration?.publication) {
      // We did already submit this current form, so we can infer the
      // "_indicateurs.déclaration.publication.site_internet" data.
      if (!app.data._déclaration) app.data._déclaration = {}
      app.data._déclaration.publication = {site_internet: app.data.déclaration.publication.url ? "oui" : "non"}
    }

    // To compute the minimum publication date, we either take the
    // `déclaration.fin_période_référence` or if it's undefined, the end of
    // civil year of `déclaration.année_indicateurs`
    const endCivilYear = new Date(`${app.data.déclaration.année_indicateurs}-12-31`)
    const minPubDate = app.data.déclaration.fin_période_référence || endCivilYear
    // The `min` value should be formatted like yyyy-mm-dd
    selectField("déclaration.publication.date").min = minPubDate.toISOString().slice(0, 10)
  }

  function toggleFields() {
    const hasSiteInternetChosen = siteInternetField.querySelector(':checked')
    const hasSiteInternet = hasSiteInternetChosen && siteInternetField.querySelector(':checked').value === 'oui'
    enableField('#fieldset-url', hasSiteInternet)
    enableField('#fieldset-modalites', hasSiteInternetChosen && !hasSiteInternet)
  }

  document.onloaded = () => {
    toggleFields()
  }
</script>
</main>

<nav>
  
  <a class=button rel=prev>Précédent</a>
  
  <progress max=0 value=0></progress>
  
  <button rel=next>Suivant</button>
  
</nav>

<!-- tunnel.js uses DOM and should be loaded last -->
<script src="/declaration/assets/js/tunnel.js"></script>

</form>

</html>

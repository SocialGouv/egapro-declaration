---
layout: empty
---
<script type="text/babel">
  document.onready = () => {
    const urlParams = new URLSearchParams(location.search)
    app.resetData()

    if (urlParams.has('siren') && urlParams.has('year')) {
      // Coming from a "declaration link" from the declaration validation email
      app.siren = urlParams.get('siren')
      app.annee = urlParams.get('year')
    }
    if (urlParams.has('token')) {
      // Coming from an "authentication link" in the confirmation email
      app.token = urlParams.get('token')
    } else {
      // Start from scratch
      delete localStorage.email
      delete localStorage.token
    }
    app.dataToLocalStorage()
    redirect(app.token ? 'commencer.html' : 'presentation.html')
  }
</script>

---
layout: tunnel
title: "Informations complémentaires"
---

<h1>
  Informations complémentaires
</h1>

<div class="only-visible-for-index-sub-75">
  {% include alert.html text="Votre index étant inférieur à 75, veuillez renseigner les informations suivantes sur les
  mesures de correction." %}
</div>

<fieldset id="fieldset-date-publication-mesures">
  <div class=row>
    {% include input.html type="date" label="Date de publication des mesures"
    name="déclaration.publication.date_publication_mesures" required="required" placeholder="aaaa-mm-jj"
    pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}" oninput="checkDate(event)" %}
  </div>
</fieldset>
</p>

<div class="only-visible-for-index-sub-85">
  {% include alert.html text="Votre index étant inférieur à 85, veuillez renseigner vos objectifs de progression pour
  les indicateurs
  calculables." %}
</div>

<p>Conformément à la loi n° 2020-1721 du 29 décembre 2020 de finances pour 2021 et aux articles L. 1142-9-1 et D.
  1142-6-1 du code du travail, indiquer les objectifs de progression fixés pour chaque indicateur pour lequel la note
  maximale n'a pas été atteinte :</p>

<table id="objectifs-table">
  <tr>
    <th></th>
    <th>Actuel</th>
    <th>Objectif *</th>
  </tr>
  <tr>
    <th style="text-align: left;">Écart de rémunération objectif</th>
    <td>
      <span id="rémunérations-note">note actuelle rému</span>
    </td>
    <td>
      {% include input.html
      type="number"
      name="indicateurs.rémunérations.objectif_de_progression"
      max="40"
      required=true
      %}
    </td>
  </tr>
  <tr class="only-visible-tranche-50-250">
    <th style="text-align: left;">Écart de taux d'augmentations individuelles</th>
    <td>
      <span id="augmentations_et_promotions-note">note actuelle rému</span>
    </td>
    <td>
      {% include input.html
      type="number"
      name="indicateurs.augmentations_et_promotions.objectif_de_progression"
      max="35"
      required=true
      %}
    </td>
  </tr>
  <tr class="only-visible-tranche-250">
    <th style="text-align: left;">Écart de taux d'augmentations individuelles</th>
    <td>
      <span id="augmentations-note">note actuelle rému</span>
    </td>
    <td>
      {% include input.html
      type="number"
      name="indicateurs.augmentations.objectif_de_progression"
      max="35"
      required=true
      %}
    </td>
  </tr>
  <tr class="only-visible-tranche-250">
    <th style="text-align: left;">Ecart de taux de promotions</th>
    <td>
      <span id="promotions-note">note actuelle rému</span>
    </td>
    <td>
      {% include input.html
      type="number"
      name="indicateurs.promotions.objectif_de_progression"
      max="15"
      required=true
      %}
    </td>
  </tr>
  <tr>
    <th style="text-align: left;">Retour de congé maternité</th>
    <td>
      <span id="congés_maternité-note">note actuelle rému</span>
    </td>
    <td>
      {% include input.html
      type="number"
      name="indicateurs.congés_maternité.objectif_de_progression"
      max="15"
      required=true
      %}
    </td>
  </tr>
  <tr>
    <th style="text-align: left;">Dix plus hautes rémunérations</th>
    <td>
      <span id="hautes_rémunérations-note">note actuelle rému</span>
    </td>
    <td>
      {% include input.html
      type="number"
      name="indicateurs.hautes_rémunérations.objectif_de_progression"
      max="10"
      required=true
      %}
    </td>
  </tr>
</table>

<fieldset id="fieldset-date-publication-objectifs">
  <div class=row>
    {% include input.html
    type="date"
    name="déclaration.publication.date_publication_objectifs"
    label="Date de publication des objectifs"
    required=true
    placeholder="aaaa-mm-jj"
    pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}"
    oninput="checkDate(event)" %}
  </div>
</fieldset>
</p>

<fieldset id="fieldset-url">
  <div>
    {% include input.html
    name="déclaration.publication.url"
    label="Adresse exacte de la page Internet (URL) sur laquelle devront être publiés les objectifs de progression et/ou
    les mesures de correction *"
    disabled=true
    class="wide" %}</div>
</fieldset>

<p style="font-size: 0.9rem;">
  <i>
    * Pour rappel, les objectifs de progression et/ou mesures de progression doivent être publiés sur la même page du
    site internet que celle où
    figurent
    les résultats obtenus à chacun des indicateurs et le niveau de résultat à l’Index.
  </i>
</p>

<fieldset id="fieldset-modalités-objectifs-mesures" class="hidden">
  <div>
    {% include textarea.html
    name="déclaration.publication.modalités_objectifs_mesures"
    label="<span class='only-visible-modalites-mesures'>Préciser les modalités de communication des mesures de
      correction auprès de vos salariés</span><span class='only-visible-modalites-objectifs'>Préciser les modalité de
      communication des objectifs de progression auprès de vos salariés</span><span
      class='only-visible-modalites-objectifs-mesures'>Préciser les modalités de communication des objectifs de
      progression et des mesures de correction auprès de vos salariés</span>"
    required=true
    class="wide" %}
  </div>
</fieldset>

<script>

  const MAX_NOTES_INDICATEURS = {
    rémunérations: 40,
    augmentations: 35,
    promotions: 15,
    augmentations_et_promotions: 35,
    congés_maternité: 15,
    hautes_rémunérations: 10
  }

  // Rendre disable les objectifs quand ils sont au maxium ou non calculables et ajouter la contrainte sur le min.
  function addConstraintsToIndicateurs(name) {
    const objectifField = selectField(`indicateurs.${name}.objectif_de_progression`)
    const note = app.getItem(`indicateurs.${name}.note`)
    const isNC = Boolean(app.getItem(`indicateurs.${name}.non_calculable`))

    if (note === MAX_NOTES_INDICATEURS[name] || isNC) {
      objectifField.disabled = true
    } else {
      objectifField.min = note + 1
    }
  }

  // Afficher la note courante de l'indicateur.
  function displayCurrentNote(name) {
    const field = document.querySelector(`#${name}-note`)
    const note = app.getItem(`indicateurs.${name}.note`)
    const isNC = Boolean(app.getItem(`indicateurs.${name}.non_calculable`))

    field.innerHTML = isNC ? "Non calculable" : note + " / " + MAX_NOTES_INDICATEURS[name]

  }

  document.onready = () => {

    // Cette page ne s'affiche que si l'index est < 85 et si l'année est > 2020.

    for (const indicateur in MAX_NOTES_INDICATEURS) {
      // Remplissage de la note courante des indicateurs.
      displayCurrentNote(indicateur)
      // Ajout du caractère disable et du min sur les objectifs des indicateurs.
      addConstraintsToIndicateurs(indicateur)
    }

    const endCivilYear = `${app.data.déclaration.année_indicateurs}-12-31`
    const minPubDate = new Date(app.data.déclaration.fin_période_référence || endCivilYear)

    // add a day to minPubDate
    minPubDate.setDate(minPubDate.getDate() + 1)

    // The `min` value should be formatted like yyyy-mm-dd
    selectField("déclaration.publication.date_publication_mesures").min = minPubDate.toISOString().slice(0, 10)
    selectField("déclaration.publication.date_publication_objectifs").min = minPubDate.toISOString().slice(0, 10)

    // Display the label "aux indicateurs calculables" if the result is non calculable but still needs to be declared.
    if (app.data.déclaration.année_indicateurs >= 2020) {
      const main = document.querySelector("main")
      main.classList.add("declaration-2021-and-after")
      if (app.data.déclaration.points_calculables < 75) {
        main.classList.add("resultat-non-calculable")
      }
    }

    // Zone à afficher en fonction de l'index.
    const main = document.querySelector("main")
    if (app.data.déclaration.index < 75) {
      main.classList.add("index-sub-75")
    }
    if (app.data.déclaration.index < 85) {
      main.classList.add("index-sub-85")
    }

    // En fonction de l'effectif, on doit afficher l'indicateur augmentations puis l'indicateur promotions, ou bien l'indicateurs augmentations_et_promotions.

    const table = document.querySelector("#objectifs-table")
    if (app.getItem("entreprise.effectif.tranche") === "50:250") {
      table.classList.add("tranche-50-250")
      selectField(`indicateurs.augmentations.objectif_de_progression`).disabled = true
      selectField(`indicateurs.promotions.objectif_de_progression`).disabled = true
    } else {
      table.classList.add("tranche-250")
      selectField(`indicateurs.augmentations_et_promotions.objectif_de_progression`).disabled = true
    }

    // Partie modalité.
    const modalites = document.querySelector("#fieldset-modalités-objectifs-mesures")

    const index = app.data.déclaration.index
    const site = app.getItem("_déclaration.publication.site_internet")

    if (index < 75 && site === "oui") {
      modalites.classList.add("show")
      modalites.classList.add("modalites-mesures")
    } else if (index < 75 && site === "non") {
      modalites.classList.add("show")
      modalites.classList.add("modalites-objectifs-mesures")
    } else if (index >= 75 && index < 85 && site === "non") {
      modalites.classList.add("show")
      modalites.classList.add("modalites-objectifs")
    }
  }

  document.onloaded = () => {

  }


  document.onsend = data => {
    // We restore a real boolean value for plan_relance from the fake one.
    if (data && data._entreprise && data._entreprise.plan_relance) {
      data.entreprise.plan_relance = data._entreprise.plan_relance === "true" ? true : false
    }
  }

</script>